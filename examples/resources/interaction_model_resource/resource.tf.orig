terraform {
  required_providers {
    alexaskills = {
      version = "0.1.0-beta0"
      source  = "thomas-b-jackson/va/alexaskills"
    }
  }
}

provider "alexaskills" {
}

module "bot" {
  source = "./lex_bot"
}

resource "alexaskills_model_resource" "hello_world" {

  skill_id = "xyz123"

  interaction_model {

    language_model {
      invocation_name = "my socal gas"

      types {
        name = "FAQ"
        values = [
          for s in module.bot.resource.aws_lex_slot_type.qna_slot_type.enumeration_value : 
            {name={value=s.value}}
        ]         
      }

      intents {
        slots {
          name = module.bot.resource.aws_lex_slot_type.qna_slot_type.name
          type = "FAQ"
        }

        name = "Qna_intent"

        samples = [format("{%s}",module.bot.resource.aws_lex_slot_type.qna_slot_type.name)]
      }

      intents {
        name = "AMAZON.StopIntent"
      }

      intents {
        name = "AMAZON.RepeatIntent"
      }

      intents {
        name = "AMAZON.FallbackIntent"
      }

      intents {
        name = "AMAZON.CancelIntent"
      }
    }
  }
}
